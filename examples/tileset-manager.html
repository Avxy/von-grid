<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
	<meta name="author" content="Corey Birnbaum" />
	<title>Grid</title>

	<link href="css/normalize.css" rel="stylesheet" type="text/css"/>
	<style>
		body {
			overflow: hidden;
		}
		#view {
			position: absolute;
			top: 0;
			left: 0;
		}
	</style>
</head>

<body>

	<div id="view"></div>

	<script type="text/javascript" src="../lib/three.min.js"></script>
	<script type="text/javascript" src="../lib/OrbitControls.js"></script>
	<script type="text/javascript" src="../dist/hex-grid.min.js"></script>
	<script type="text/javascript" src="../dist/von-grid-extras.min.js"></script>
	<script type="text/javascript">
	window.addEventListener('load', function(evt) {
		var scene = new vg.Scene({
			element: document.getElementById('view'),
			cameraPosition: {x:0, y:150, z:150}
		}, true);

		// this constructs the cells in grid coordinate space
		var grid = new vg.HexGrid();
		var board = new vg.Board(grid);
		var tileset = new vg.TilesetManager(board);

		var self = this;

		grid.load('assets/hex-map.json', function(map) {
			// now that the grid is loaded and cells instantiated,
			// load and build our map using the tileset resources specified in the map data
			tileset.load(map, function() {
				// normally we'd call board.reset() before this but we know there's nothing on the board, so go ahead
				tileset.makeTiles();
				// start the loop now that everything is ready
				update();
			}, self);
		}, this);

		scene.add(board.group);
		scene.focusOn(board.group);

		function update() {
			scene.render();
			requestAnimationFrame(update);
		}
	});
	</script>
</body>
</html>
